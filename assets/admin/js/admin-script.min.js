function xLocDraggedListener(e,t){var a={lat:e,lng:t};jQuery("#lat").val(e),jQuery("#lng").val(t),geocoder.geocode({location:a},function(e,t){if("OK"===t)if(e[0]){var a=e[0].formatted_address;jQuery("#formatted_address").val(a),jQuery("#search-address").val(a)}else window.alert("No results found");else window.alert("Geocoder failed due to: "+t)})}function addMarker(e,t){var a=new google.maps.Marker({draggable:!0,position:e,map:t});markers.push(a),google.maps.event.addListener(a,"dragend",function(e){xLocDraggedListener(this.getPosition().lat(),this.getPosition().lng())})}function setMapOnAll(e){for(var t=0;t<markers.length;t++)markers[t].setMap(e)}function clearMarkers(){setMapOnAll(null)}function deleteMarkers(){clearMarkers(),markers=[]}function initMap(){if(0===$("#map-canvas").length)return!1;var e=$("#lat").val(),t=$("#lng").val();""==e&&""==t?(e=xloc_default_latitude,t=xloc_default_longitude):(e=parseFloat(e),t=parseFloat(t));var a={lat:e,lng:t};void 0==map?(map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:xloc_default_zoom_level,center:a}),map.addListener("click",function(e){deleteMarkers(),addMarker(e.latLng,map),xLocDraggedListener(e.latLng.lat(),e.latLng.lng())}),$("#search-address").geocomplete({details:"#xlocate-map-wrapper",detailsAttribute:"data-geo"}).bind("geocode:result",function(e,t){xLocDraggedListener(t.geometry.location.lat(),t.geometry.location.lng()),deleteMarkers(),addMarker(t.geometry.location,map),map.panTo(t.geometry.location)})):deleteMarkers(),addMarker(a,map),map.panTo(a)}function xLocGeoFindMe(){function e(e){var t=e.coords.latitude,o=e.coords.longitude;a.innerHTML="<p>Latitude is "+t+"° <br>Longitude is "+o+"°</p>",$("#lat").val(t),$("#lng").val(o),initMap()}function t(){a.innerHTML="Unable to retrieve your location"}var a=document.getElementById("out");if(!navigator.geolocation)return void(a.innerHTML="<p>Geolocation is not supported by your browser</p>");a.innerHTML="<p>Locating…</p>",navigator.geolocation.getCurrentPosition(e,t)}function xloc_cleartext(){return document.getElementById("search-address").value="",!1}function toggle_password_api(e){var t=document,a=t.getElementById(e),o=t.getElementById("showhide");"Show"==o.innerHTML?(a.setAttribute("type","text"),o.innerHTML="Hide"):(a.setAttribute("type","password"),o.innerHTML="Show")}$=jQuery;var map,markers=[],geocoder=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow,xloc_default_latitude=27.7090319;void 0!==settings_data.default_latitude&&(xloc_default_latitude=parseFloat(settings_data.default_latitude));var xloc_default_longitude=85.2911132;void 0!==settings_data.default_longitude&&(xloc_default_longitude=parseFloat(settings_data.default_longitude));var xloc_default_zoom_level=15;void 0!==settings_data.default_zoom_level&&(xloc_default_zoom_level=parseInt(settings_data.default_zoom_level)),jQuery(function(e){initMap(),e("#find-location").on("click",function(e){e.preventDefault(),xLocGeoFindMe()})});